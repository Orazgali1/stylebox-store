<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>StyleBox ‚Äî –ú–∞–≥–∞–∑–∏–Ω –æ–¥–µ–∂–¥—ã</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex flex-col min-h-screen bg-gray-100 text-gray-800">

  <header class="bg-white shadow p-4 flex justify-between items-center relative z-10">
    <h1 class="text-2xl font-bold text-indigo-600">StyleBox</h1>
    <button id="burger-toggle" class="md:hidden text-indigo-600 text-2xl">‚ò∞</button>

    <nav id="nav-menu" class="absolute top-full left-0 w-full bg-white shadow-md md:shadow-none md:static md:w-auto md:flex hidden md:items-center md:space-x-6 px-4 md:px-0 py-4 md:py-0">
      <a href="index.html" class="block py-2 md:py-0 text-indigo-600 hover:underline">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="cart.html" class="block py-2 md:py-0 text-indigo-600 hover:underline">–ö–æ—Ä–∑–∏–Ω–∞</a>
      <a href="admin.html" class="block py-2 md:py-0 text-indigo-600 hover:underline">–ê–¥–º–∏–Ω–∫–∞</a>
      <a href="favorites.html" class="block py-2 md:py-0 text-indigo-600 hover:underline">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</a>

      <div class="relative md:static">
        <button id="user-menu-button" class="block py-2 md:py-0 text-indigo-600 hover:underline w-full text-left md:text-center">
          –í–æ–π—Ç–∏
        </button>
        <div id="user-menu" class="hidden absolute bg-white border border-gray-200 rounded shadow-lg mt-1 right-0 w-44 z-50">
          <a href="login.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">–í—Ö–æ–¥</a>
          <a href="register.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
          <a id="account-link" href="account.html" class="hidden px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
        </div>
      </div>
    </nav>
  </header>

  <main class="flex-grow p-6">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4">
      <div id="filters" class="flex flex-wrap gap-2">
        <button data-category="all" class="filter-btn bg-indigo-600 text-white px-4 py-2 rounded-full shadow-md transition-all duration-200">–í—Å–µ</button>
        <button data-category="–§—É—Ç–±–æ–ª–∫–∞" class="filter-btn bg-gray-200 text-gray-800 hover:bg-indigo-100 hover:text-indigo-600 px-4 py-2 rounded-full shadow-sm transition-all">–§—É—Ç–±–æ–ª–∫–∏</button>
        <button data-category="–î–∂–∏–Ω—Å—ã" class="filter-btn bg-gray-200 text-gray-800 hover:bg-indigo-100 hover:text-indigo-600 px-4 py-2 rounded-full shadow-sm transition-all">–î–∂–∏–Ω—Å—ã</button>
        <button data-category="–•—É–¥–∏" class="filter-btn bg-gray-200 text-gray-800 hover:bg-indigo-100 hover:text-indigo-600 px-4 py-2 rounded-full shadow-sm transition-all">–•—É–¥–∏</button>
        <button data-category="–ü–ª–∞—Ç—å–µ" class="filter-btn bg-gray-200 text-gray-800 hover:bg-indigo-100 hover:text-indigo-600 px-4 py-2 rounded-full shadow-sm transition-all">–ü–ª–∞—Ç—å—è</button>
        <button data-category="–ö—Ä–æ—Å—Å–æ–≤–∫–∏" class="filter-btn bg-gray-200 text-gray-800 hover:bg-indigo-100 hover:text-indigo-600 px-4 py-2 rounded-full shadow-sm transition-all">–ö—Ä–æ—Å—Å–æ–≤–∫–∏</button>
        <button data-category="–ö—É—Ä—Ç–∫–∞" class="filter-btn bg-gray-200 text-gray-800 hover:bg-indigo-100 hover:text-indigo-600 px-4 py-2 rounded-full shadow-sm transition-all">–ö—É—Ä—Ç–∫–∏</button>
      </div>

      <div class="w-full sm:w-64 flex items-center gap-2">
        <input id="search-input" type="text" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞..." class="w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-300" />
        <button id="search-btn" class="text-xl text-indigo-600 hover:text-indigo-800 transition">
          üîç
        </button>
      </div>
    </div>

    <h2 class="text-xl font-semibold mb-4">–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</h2>
    <div id="product-list" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 px-4">
      <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å -->
    </div>
    <div class="text-gray-500 italic">–¢–æ–≤–∞—Ä—ã —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è...</div>
  </main>

  <footer class="bg-white shadow p-4 text-center text-sm text-gray-500">
    &copy; 2025 StyleBox. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
  </footer>

  <div id="toast" class="fixed bottom-6 right-6 bg-indigo-600 text-white px-4 py-2 rounded shadow-md opacity-0 pointer-events-none transition-opacity duration-300 z-50">
    –¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const toggle = document.getElementById('burger-toggle');
      const menu = document.getElementById('nav-menu');
      const userBtn = document.getElementById('user-menu-button');
      const userMenu = document.getElementById('user-menu');
      const accountLink = document.getElementById('account-link');
      const user = JSON.parse(localStorage.getItem('user'));

      if (user && user.name && userBtn) {
        userBtn.textContent = `–ü—Ä–∏–≤–µ—Ç, ${user.name}`;
        accountLink.classList.remove('hidden');
      }

      toggle.addEventListener('click', () => {
        menu.classList.toggle('hidden');
      });

      document.querySelectorAll('#nav-menu a').forEach(link => {
        link.addEventListener('click', () => {
          if (window.innerWidth < 768) {
            menu.classList.add('hidden');
          }
        });
      });

      userBtn?.addEventListener('click', (e) => {
        e.stopPropagation();
        userMenu.classList.toggle('hidden');
      });

      document.addEventListener('click', (e) => {
        if (!userMenu.contains(e.target) && !userBtn.contains(e.target)) {
          userMenu.classList.add('hidden');
        }
      });

      const searchInput = document.getElementById('search-input');
      const productList = document.getElementById('product-list');

      searchInput.addEventListener('input', () => {
        const query = searchInput.value.toLowerCase();
        const cards = productList.querySelectorAll('.product-card');

        cards.forEach(card => {
          const title = card.querySelector('.product-title').textContent.toLowerCase();
          card.style.display = title.includes(query) ? 'block' : 'none';
        });
      });

      const filterButtons = document.querySelectorAll('.filter-btn');
      filterButtons.forEach(button => {
        button.addEventListener('click', () => {
          filterButtons.forEach(btn => btn.classList.remove('bg-indigo-600', 'text-white', 'shadow-md'));
          button.classList.add('bg-indigo-600', 'text-white', 'shadow-md');

          const category = button.dataset.category;
          if (category === 'all') {
            renderProducts(allProducts);
          } else {
            const filtered = allProducts.filter(p => p.category === category);
            renderProducts(filtered);
          }
        });
      });
    });
  </script>

  <script src="js/products.js"></script>
  <script src="js/main.js"></script>
</body>
</html>